<!DOCTYPE html>
<html>

<head>
    <title> imgstat</title>



    <style>

       
    </style>
</head>

<body>
    <canvas width="400" height="229" id="imgCanvas">
    <div id="details"></div>
</body>
<script type="text/javascript">
    
    ctx = document.getElementById('imgCanvas').getContext('2d');
    var data = [];
    var img = new Image();
    img.onload = function () {
        ctx.drawImage(img,0,0);
        loadData();
    };
    img.src = "sample.jpeg";
    console.log(img.width);
    console.log(img.height);

    //defining a pixel
    var Pixel = function(r,g,b,a){
        this.r=r;
        this.g=g;
        this.b=b;
        this.a=a;
    };

    var Pos = function(){
        this.x = 0;
        this.y = 0;
    };

    //defining pixelData
    var pixelData = function(){};

    pixelData.prototype.pos = function(x,y){
        this.pos = new Pos();
        this.pos.x = x;
        this.pos.y = y;
        
        return this.pos;

    };

    //function to fill r,g,b,a values
    pixelData.prototype.pushdata = function(r,g,b,a){
        this.rgba = new Pixel(r,g,b,a);
        return this.rgba;
    };

   
   
    
    function loadData(){

         var pixels = ctx.getImageData(0, 0, img.width, img.height).data;//extracting pixel data in Uint8ClampedArray 
         //console.log(pixelData);
         
         
         
         for(x=0;x<img.width;x++)
         {
            data[x]=[];
            for(y=0;y<img.height;y++)
            {
                    currentPos = y*img.height*4 + x*4 ; //maps x,y to Uint8ClampedArray pos
                    var pData = new pixelData();
                    pData.pos(x,y);
                    pData.pushdata(pixels[currentPos],pixels[currentPos+1],pixels[currentPos+2],pixels[currentPos+3]);
                    data[x][y] =pData;
                    //data[x][y].pushData(currentPos,currentPos+1,currentPos+2,currentPos+3); 
                    
            }
         }
         console.log(data);

    }


</script>

</html>